<!DOCTYPE html>
<html>
<head>
<title>Teacher Attendance Report</title>
<style>
body { font-family: Arial; text-align:center; }
table { margin-top:15px; border-collapse:collapse; width:80%; margin:auto; }
th,td{ border:1px solid black; padding:8px; }
</style>
</head>

<body>

<h2>ðŸ“Œ Student Attendance Report</h2>

<label>Select Date:</label>
<input type="date" id="date">
<button onclick="loadReport()">Get Report</button>

<table>
<thead>
<tr>
<th>Roll No</th>
<th>Name</th>
<th>Session</th>
<th>Status</th>
<th>Time</th>
</tr>
</thead>
<tbody id="report-body"></tbody>
</table>

<script>
async function loadReport(){

  const date = document.getElementById("date").value;
  if(!date){ alert("Select a date"); return; }

  try{
    const res = await fetch(
      "http://127.0.0.1:5000/report?date=" + date
    );

    const data = await res.json();
    const tbody = document.getElementById("report-body");
    tbody.innerHTML = "";

    data.forEach(r=>{
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${r.roll_no}</td>
        <td>${r.name}</td>
        <td>${r.session}</td>
        <td>${r.status}</td>
        <td>${r.time ?? "-"}</td>
      `;
      tbody.appendChild(tr);
    });

  } catch(e){
    alert("Backend not running. Start app.py");
  }
}
</script>

</body>
</html>
